angular.module("sseApp",[]).controller("sseController",["$scope","$http",function(n,t){function r(){var n="G"+Math.random();return n.substring(3,8)}function u(){n.script.sessionId=r()}n.message="te";n.script={name:"Ville Virtanen"};n.isAlertVisible=!1;n.isListening=!1;n.startProcess=function(){n.message="";n.isAlertVisible=!1;t.post("http://localhost:53193/api/process",JSON.stringify(n.script))};n.startListening=function(){n.isListening=!0;!window.EventSource||(i=new EventSource("http://localhost:53193/api/StatusUpdates?sessionId="+n.script.sessionId),i.addEventListener("message",function(t){n.message=t.data;n.isAlertVisible=!0;n.$apply()},!1),i.addEventListener("open",function(){console.log("open!")},!1),i.addEventListener("error",function(n){n.readyState==EventSource.CLOSED&&console.log("error!")},!1))};n.stopListening=function(){var r="http://localhost:53193/api/StatusUpdates/"+n.script.sessionId;t.delete(r).success(function(){i!=null&&i.close();n.isListening=!1})};var i;u()}]);
//# sourceMappingURL=controller.min.js.map